<html>

<head lang="en-US">
	<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Components | WSU Design System</title>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.8.0/css/bulma.css" />
	<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.16.1/axios.min.js"></script>

	<style>
		ul li a {
			text-transform: capitalize;
		}

		body {
			font-family: 'Montserrat', sans-serif;

			max-width: 800px;
			margin: 0 auto;

		}

		#links {
			display: flex;
			flex-flow: row wrap;

			margin-top: 20px;
		}

		.card {
			display: flex;
			justify-content: space-between;

			width: calc(50% - 20px);
			margin: 10px;
			padding: 10px;
		}

		.dev-only {
			font-family: monospace;
			font-size: 12px;

			padding: 0 20px;

			text-transform: uppercase;
		}

		.quick-links {
			display: flex;
			justify-content: center;

			margin-top: 40px;
		}

		.quick-links a {
			margin-right: 10px;
			padding: 12px 20px;

			background: whitesmoke;
		}

		.quick-links a:last-child {
			margin-right: 0;
		}

		.hidden {
			display: none;
		}
	</style>
</head>

<body>
	<div class="container is-fluid">
		<h1 class="is-size-1">WSU Design System</h1>
		<ul id="links"></ul>
		<div class="quick-links">
			<a href="dist" class="dist-folder hidden">Dist Folder</a>
			<a href="https://stage.web.wsu.edu/web-design-system/demo-nav-start-open/" class="demo-page">Design System Staging Site</a>
		</div>
	</div>

	<script>
		const container = document.querySelector("#links");

		axios
			.get(
				'https://api.github.com/repos/washingtonstateuniversity/wsu-web-design-system/contents/components/dist'
			)
			.then(function (response) {

				let data = response.data;
				let item = "";
				let itemText = "";
				let itemSlug = "";
				let itemNameNoDashes = "";
				let itemLink = "";

				data.forEach(function (item) {

					itemSlug = item.name;
					itemNameNoDashes = itemSlug.replace(/-/g, " ");
					item = document.createElement("li");
					item.classList.add('card');

					itemLink = document.createElement("a");
					itemText = document.createTextNode(itemNameNoDashes);
					itemLink.setAttribute('href', 'https://washingtonstateuniversity.github.io/wsu-web-design-system/components/dist/' + itemSlug + '/' + itemSlug + '.html')
					itemLink.appendChild(itemText);
					item.appendChild(itemLink);

					if (location.hostname === "localhost" || location.hostname === "127.0.0.1") {
						itemLinkDist = document.createElement("a");
						itemLinkDist.setAttribute('href', 'dist/' + itemSlug + '/' + itemSlug + '.html');
						itemTextDist = document.createTextNode("[Local]");
						itemLinkDist.classList.add('dev-only');
						itemLinkDist.appendChild(itemTextDist);
						item.appendChild(itemLinkDist);
					}

					// Append list item to container
					container.appendChild(item); // Container
				});
			})
			.catch(function (err) {
				console.log(err);

				item = document.createElement("div");
				item.style.color = "red";
				item.style.fontStyle = "italic";
				item.style.fontWeight = "bolder";
				itemText = document.createTextNode(err.response.data.message);

				item.appendChild(itemText); // List item
				container.appendChild(item); // Container
			});

		if (location.hostname === "localhost" || location.hostname === "127.0.0.1") {
			document.querySelector('.dist-folder').classList.remove('hidden');
		}
	</script>
</body>

</html>
